0
00:00:00,000 --> 00:00:13,000


1
00:00:13,000 --> 00:00:19,800
好 接下來呢 我們想看看各學校在男女比例相關的這個資訊

2
00:00:20,000 --> 00:00:25,500
那男女比例的話呢 我們要看說這裡的資料裡面有一年級男生 一年級女生

3
00:00:25,600 --> 00:00:31,000
有男女的這個資訊 因為他這個資料 他是散布在各個欄位裡面

4
00:00:31,000 --> 00:00:34,000
所以我們要去做一些額外的這個處理

5
00:00:34,000 --> 00:00:38,000
那我們額外的去寫了一個 function 來做這件事情

6
00:00:38,000 --> 00:00:42,000
那這個叫做 gender 然後把這個資料表帶進來

7
00:00:42,500 --> 00:00:48,000
那會產生一個新的資料表 那裡面的有男生跟女生的人數

8
00:00:48,000 --> 00:00:51,700
那怎麼做呢 首先我們先透過 df.copy

9
00:00:52,000 --> 00:00:56,000
去複製另外一個表 那當然這裡的內容是一樣的

10
00:00:56,000 --> 00:00:59,000
這個就像我們在處理 excel 的時候呢

11
00:00:59,700 --> 00:01:04,000
我們擔心說原來的資料被破壞 所以我們先複製一個副本

12
00:01:04,300 --> 00:01:10,800
那接下來的話呢 我用另外一種技巧來把這個男生跟女生的這個資料

13
00:01:11,000 --> 00:01:15,000
來把它做一個加總 我們去把這裡所有的這個欄位

14
00:01:15,000 --> 00:01:20,000
像這個我們要做的是一年級男生二年級男生把這些

15
00:01:20,000 --> 00:01:23,000
他的這個欄位名稱變成一個字串

16
00:01:24,000 --> 00:01:29,300
然後接下來再透過呼叫 .split 他就會把他切割成一個 list

17
00:01:29,700 --> 00:01:36,000
那這個 list 的第 0 個欄位就是一年級男生 然後接下來就是二年級男生等等...

18
00:01:37,000 --> 00:01:40,500
那接下來的話呢 我們增加了一個欄位

19
00:01:40,700 --> 00:01:46,000
叫做 male 是代表男生的總數 一開始初始值是 0

20
00:01:46,000 --> 00:01:50,000
就跑一個迴圈 去跑出這個 list

21
00:01:50,000 --> 00:01:54,000
那當然知道這個 boy 裡面的第一個就是一年級男生

22
00:01:54,500 --> 00:01:59,600
所以等一下跑迴圈的時候這一個 gender_df[0] 就會抓到

23
00:02:01,000 --> 00:02:04,000
一年級男生的這一筆資料 以此類推

24
00:02:04,500 --> 00:02:11,000
所以這個迴圈跑完的話 那我們就可以知道所有男生的這個人數就寫在這個地方

25
00:02:11,700 --> 00:02:16,000
那同理 女生的話就寫在 female 這一個欄位裡面

26
00:02:16,700 --> 00:02:21,000
那全部都加完了以後 我們就把這個資料 return 回來

27
00:02:21,500 --> 00:02:30,000
先執行一下這一個主程式 然後再到主程式這個地方去呼叫他

28
00:02:31,000 --> 00:02:34,000
執行完了以後 看到這個 df_gender

29
00:02:34,500 --> 00:02:43,000
先來看下 df_gender 這筆資料 拉到最右邊這個地方 就有男生跟女生的這個資料

30
00:02:43,000 --> 00:02:48,000
算出男女生的人數以後就可以去算一下這個比例

31
00:02:48,500 --> 00:02:52,000
比例的話就等於男生去除於女生

32
00:02:52,000 --> 00:02:56,700
然後是到小數點下兩位 那我們執行一下

33
00:02:57,300 --> 00:03:02,000
得到這個表以後呢 我們首先來看一下就是男女生比例

34
00:03:02,000 --> 00:03:04,000
還蠻均勻的這個學校

35
00:03:04,000 --> 00:03:09,600
那我們就把他定義成說這個比例是在於 0.9 到 1.1 之間的

36
00:03:10,000 --> 00:03:14,500
那我們先用一個條件叫 balance 去檢查這個 rate

37
00:03:15,000 --> 00:03:18,000
他的值是 between 0.9 到 1.1 之間的

38
00:03:19,000 --> 00:03:21,000
那我就是先產生這個條件

39
00:03:21,000 --> 00:03:27,000
再把這個條件放到我們這一個 dataframe 裡面做過濾

40
00:03:27,000 --> 00:03:30,000
過濾出來以後的這個 balance

41
00:03:31,000 --> 00:03:37,000
就是滿足這樣條件的所有的學校 好 把這個學校印出來

42
00:03:37,000 --> 00:03:43,300
所以各位可以看到總共大概有十七所學校 他的男女比例還蠻均勻的

43
00:03:44,000 --> 00:03:47,700
那接下來 我們再來看一下差距比較多的

44
00:03:48,000 --> 00:03:53,500
那我們就先對他去做一個排序 所以是依照 rate 來去做一個排序

45
00:03:53,700 --> 00:04:03,000
排序完了以後呢 我們就把在前面的幾個學校 把它這個印出來

46
00:04:03,000 --> 00:04:07,600
那因為我們是遞減的一種排序

47
00:04:08,000 --> 00:04:13,000
所以這個值越高的話 就代表男生的人數是越多的

48
00:04:13,000 --> 00:04:16,000
所以包含像虎尾科大 台北科大等等...

49
00:04:16,000 --> 00:04:21,000
這個男生的人數都是相對女生來講是比較多的

50
00:04:22,000 --> 00:04:27,000
那看一下這個 tail 就是比較尾端的幾個學校

51
00:04:27,000 --> 00:04:33,000
就是男女比例女生比較多的 包含的像是護專 護專是佔很大宗啊

52
00:04:33,000 --> 00:04:38,000
那我們也可以透過 describe 去看一下這一個狀況

53
00:04:38,000 --> 00:04:45,000
所以他的平均大概是 1.1 還算蠻不錯的  balance 的地方大概是在 0.9

54
00:04:45,000 --> 00:04:50,000
那這樣子的一張表 df_gender 產生出來了以後

55
00:04:51,000 --> 00:04:57,500
其實是還蠻大張的一張表 因為我們增加了三個欄位

56
00:04:58,000 --> 00:05:04,000
如果你覺得而後我再去做運算的時候 其實只會看到這三個欄位的話

57
00:05:04,000 --> 00:05:11,000
可以找先做一下處理 透過這個 dataframe 只取這三個欄位

58
00:05:11,000 --> 00:05:15,000
來產生一個新的表就叫做 df_rate

59
00:05:15,000 --> 00:05:22,900
那這樣子的話呢 df_rate 他就會比較簡潔一點 你可以畫出他的 boxplot

60
00:05:23,000 --> 00:05:30,000
一樣在這個地方看一下 df_rate 只有三個欄位 就比較簡潔一點

61
00:05:31,700 --> 00:05:38,000
接下來我們想要來分析一下每一個縣市 他有大學的這個數量是什麼樣子

62
00:05:38,000 --> 00:05:45,000
我們接下來看一下原來的這一筆資料 他其實裡面有學校名稱以外

63
00:05:45,000 --> 00:05:52,000
他還有這個縣市 所以這個資訊就讓我們可以來做這樣子的一個運算

64
00:05:52,000 --> 00:06:00,000
但是如果我們做這個 groupby 的時候只用縣市的名稱做一個 groupby

65
00:06:00,000 --> 00:06:03,000
那他學校的名稱這個資訊就不見了

66
00:06:03,000 --> 00:06:08,000
因為他會把這個數值方面的東西去做一個加總

67
00:06:08,000 --> 00:06:12,500
或者是計算他的這個數量 所以學校的名稱就不見了

68
00:06:13,000 --> 00:06:16,000
那如果說我們用學校名稱來做 groupby 的話

69
00:06:16,000 --> 00:06:21,000
那縣市名稱就會跟著不見 那怎麼辦呢 這裡就有個小技巧

70
00:06:21,000 --> 00:06:24,500
就是我這個 groupby 的這個欄位事實上他是兩個

71
00:06:25,000 --> 00:06:30,000
是用縣市的名稱跟學校的名稱兩個來做這個 groupby

72
00:06:30,000 --> 00:06:35,000
而且呢 我希望說他這兩個欄位都保留 不要變成是 index

73
00:06:35,000 --> 00:06:40,000
所以我這個 as_index 的這個地方一樣把他設為 False 去做加總

74
00:06:40,000 --> 00:06:46,000
那我們看一下 這叫做 df_city_u 看一下這個 df_city_u

75
00:06:47,000 --> 00:06:53,000
那跑出來了以後 各位就可以看到說 這個縣市名稱跑到前面來了

76
00:06:53,000 --> 00:06:59,000
然後學校的名稱是在這個地方 所以看到新北市有很多的這個學校

77
00:06:59,000 --> 00:07:01,200
那接下來的話呢 因為我們的目標

78
00:07:01,200 --> 00:07:05,000
是要去看每一個縣市有多少個這個學校

79
00:07:05,000 --> 00:07:08,700
所以呢 我們再一次做一個 groupby

80
00:07:09,000 --> 00:07:13,000
那這一次的話 我們是用縣市名稱來去做一個 groupby

81
00:07:13,000 --> 00:07:15,300
去計算他的這個 count 他的這個數量

82
00:07:20,300 --> 00:07:23,500
執行完了以後呢 這裡是 df_city

83
00:07:25,000 --> 00:07:30,000
這樣子的話呢 就會看到我們這時候是用縣市的名稱當成 index

84
00:07:30,000 --> 00:07:34,000
然後 後面這個地方都會變成是數量

85
00:07:36,000 --> 00:07:39,000
因為包含後面這個地方 男生女生他全部都會有

86
00:07:40,000 --> 00:07:42,000
我們其實只需要這個學校名稱

87
00:07:42,000 --> 00:07:46,000
所以呢 我們再產生一個新的表

88
00:07:46,000 --> 00:07:52,000
那再把這個表 再全部塞給 df_city 所以我們就只抓學校的名稱

89
00:07:52,000 --> 00:07:57,000
那當然這學校名稱 他對於我們這一個表的意義又不太一樣

90
00:08:57,000 --> 00:08:03,500
事實上應該代表的是學校的個數 所以我在透過 .colors 等於學校個數

91
00:08:04,000 --> 00:08:07,000
這樣子的話 把這個名稱做一次的修訂

92
00:08:10,000 --> 00:08:13,000
執行以後呢 我們看這個 df_city

93
00:08:14,800 --> 00:08:20,000
各位就可以看到這個地方是縣市的名稱 然後接下來是學校的這個個數

94
00:08:20,800 --> 00:08:28,000
也可以在這個地方點一下學校的個數 台北市是最多的 25 新北市 20

95
00:08:29,500 --> 00:08:35,000
那我們可以在這個地方 畫出一個 bar chart 把他畫出來

96
00:08:36,000 --> 00:08:42,000
這個地方看到台北市 金門的話 他的學校的個數就比較少一點

97
00:08:44,000 --> 00:08:50,000
那各位可以想想看 這六都的話

98
00:08:50,000 --> 00:08:55,500
總共學生人數是多少 然後他們佔全國多少比例

99
00:08:56,000 --> 00:08:59,000
這個就留著讓大家自己來練習看看

