0
00:00:00,000 --> 00:00:13,000


1
00:00:14,000 --> 00:00:16,000
這個單元呢 我要來跟大家介紹

2
00:00:16,000 --> 00:00:21,000
107 學年度大專院校學生的人數

3
00:00:21,000 --> 00:00:26,500
這個資料呢 一樣是在 data.gov.tw 這個網站可以拿到

4
00:00:27,000 --> 00:00:31,000
我們可以直接的用這個 URL 去找這個資料

5
00:00:31,300 --> 00:00:35,000
那首先呢 我們要先把這個資料下載下來

6
00:00:35,000 --> 00:00:41,000
放在你的這個目錄下 那以我這個例子呢 是放在 data 下面

7
00:00:41,000 --> 00:00:47,000
107_student.csv 那我們就先看一下這一筆資料

8
00:00:48,000 --> 00:00:54,000
那這一筆資料呢 包含了很多的這個欄位包含了學校的代碼 名稱

9
00:00:54,300 --> 00:01:00,000
然後他是日間部還是進修部的 好那接下來就一大堆的數量

10
00:01:00,000 --> 00:01:06,000
包含說一年級的學生 一年級的男生女生等等的 一直到

11
00:01:06,000 --> 00:01:10,300
五六年級 然後還有研究生等等...

12
00:01:10,500 --> 00:01:14,000
最後呢 有縣市的名稱還有他的體系別等等...

13
00:01:14,800 --> 00:01:19,000
所以我們就是先寫一個 function 把他這個資料讀進來

14
00:01:19,200 --> 00:01:26,000
那我們先指名一下他的第 0 行 他是一個 header 是一個欄位的說明

15
00:01:26,800 --> 00:01:31,000
然後學校的代碼 因為他都是是一個數字型的

16
00:01:31,500 --> 00:01:36,000
所以我們把他強制的告訴 pandas 說他是一個字串

17
00:01:38,500 --> 00:01:40,000
另外有一個我們要特別注意的

18
00:01:40,000 --> 00:01:46,000
就是他原始的資料裡面 他會把這個數量是零個

19
00:01:46,000 --> 00:01:50,000
他用一個 dash 來做一個表示

20
00:01:50,000 --> 00:01:54,800
這一個 dash 等一下我們在做加總的時候會出現問題

21
00:01:55,000 --> 00:01:58,800
所以這裡我們要先做一個處理 那怎麼處理呢

22
00:01:59,000 --> 00:02:04,000
我們就跑一個迴圈 把那些欄位 只要看到 dash 的

23
00:02:04,000 --> 00:02:08,000
我就把他 replace 變成是 0 所以我們看一下

24
00:02:08,000 --> 00:02:13,000
這個數值的欄位是在哪些欄位

25
00:02:14,000 --> 00:02:18,800
就到原始資料看一下0 1 2 3 4

26
00:02:19,000 --> 00:02:25,000
從第四個 column 開始這一年級男生 那這個地方開始是數字

27
00:02:25,000 --> 00:02:32,000
一直到什麼呢 一直到最右邊這個地方 這裡是 -1 -2 -3

28
00:02:32,000 --> 00:02:37,000
研修生的女生這個地方也是一個數字嘛 這個地方是 -3

29
00:02:37,000 --> 00:02:41,000
那到 -3 的下一個  所以這個地方是 -2

30
00:02:42,000 --> 00:02:48,000
所以呢 我們是跑這個迴圈 就是從 columns 4 到 -2

31
00:02:48,500 --> 00:02:55,000
那每一次的我們都是先把這筆資料呢 我們先把他轉成是一個 str

32
00:02:55,000 --> 00:03:00,000
否則他是一個 dataframe 的一個型態 我先把它轉成是字串

33
00:03:00,000 --> 00:03:06,500
再把這個 dash replace 變成是 0 然後還是一個字串型態

34
00:03:06,700 --> 00:03:12,000
然後我們再把他透過 astype 把他轉型變成是整數的這個型態

35
00:03:12,000 --> 00:03:16,000
所以我們先執行一下這一個程式

36
00:03:21,000 --> 00:03:25,000
那接下來呢 我們就到我們的這個主程式這個地方

37
00:03:25,000 --> 00:03:32,000
去執行一下這個程式 那我們先到 df107 的這一個資料表裡面

38
00:03:32,300 --> 00:03:36,000
那我們就來看一下 df107 的這一個資料表

39
00:03:36,000 --> 00:03:41,000
我們透過 variable explorer 來看 這個資料看起來會比較漂亮一點的

40
00:03:41,500 --> 00:03:48,000
資料全部都讀進來 包含學校代碼 學校的名稱

41
00:03:48,000 --> 00:03:53,800
那你也可以看到他的 進修別等等 後面全部都是數字

42
00:03:54,000 --> 00:04:00,000
除了倒數三個 倒數兩個這個地方 他不是一個數字的形態

43
00:04:00,500 --> 00:04:05,000
接下來我們想要分析每一間學校的人數

44
00:04:05,000 --> 00:04:09,000
那怎麼做呢 我們先來看一下這一個表

45
00:04:09,300 --> 00:04:15,000
從這個表裡面 各位可以看到每一間學校 因為他有不同的學制

46
00:04:15,000 --> 00:04:20,000
包含了日間部跟進修部 那還有不同的等級 所以像政治大學其實

47
00:04:20,000 --> 00:04:25,000
他就包含了四筆資料 那這四筆資料 我必須要把它做一個加總

48
00:04:25,000 --> 00:04:31,000
另外一個就是他有不同年級的資料 這個地方呢 我也需要把他去做一個加總

49
00:04:31,300 --> 00:04:37,000
所以怎麼做呢 首先我先透過 groupby 先把學校 依照學校的名稱

50
00:04:37,000 --> 00:04:40,000
先把他 group 起來 我們先來執行一下

51
00:04:44,000 --> 00:04:49,000
那這個地方後面呢 我用的 aggregation function 是 sum 就是要把他去做一個加總

52
00:04:50,000 --> 00:04:53,300
那我們是把他放在 df 嘛 我們再來看下 df

53
00:04:53,500 --> 00:04:01,000
這時候呢 果然這個學校的話都已經是只有一所

54
00:05:01,500 --> 00:05:06,000
像是世新大學他就只有一筆資料 因為這個地方已經有做加總了

55
00:05:06,500 --> 00:05:10,300
往後右邊的這裡全部都是數字的資料

56
00:05:10,500 --> 00:05:19,000
因為我們是做一個 groupby 接下來呢 這裡有很多的 column 全部把他加總起來

57
00:05:19,300 --> 00:05:23,000
因為我們要做一個新的欄位

58
00:05:23,000 --> 00:05:28,000
把它叫做 tot 等於 columns 我們是從第 0 個 column

59
00:05:28,000 --> 00:05:34,800
第 0 個欄位一直加總到最後的一個欄位 所以就是從 0 一直到最後

60
00:05:35,000 --> 00:05:40,800
然後呢 一樣我們是做一個 sum 那各位注意到他預設的這個 sum 的話呢

61
00:05:41,000 --> 00:05:45,000
是從這個直向...這個縱向

62
00:05:45,000 --> 00:05:50,800
那我們目前要橫向的話 那我們要加上一個參數 axis 等於 1

63
00:05:51,000 --> 00:05:54,000
這樣他才會橫向的去加總這個數字

64
00:05:54,000 --> 00:05:58,000
那我們現在再 run 一下 再來執行一下

65
00:05:59,000 --> 00:06:03,300
那執行完了以後 我們再來看一下我們的這一個 df

66
00:06:04,800 --> 00:06:08,000
那我們拉到最右邊 這裡已經有一個 tot 這樣的欄位出現了

67
00:06:09,000 --> 00:06:15,800
那我們希望說能夠依照這個 tot 來做一下這個排序 所以我們就呼叫一下 sort_value

68
00:06:16,000 --> 00:06:19,000
那排序完了以後 這個資料我們一樣要丟給 df

69
00:06:19,000 --> 00:06:25,000
所以等一下 df 呢 應該就是排序後的這個結果 一樣執行一下

70
00:06:29,500 --> 00:06:34,500
這時候他就已經是經過排序的了 你可以看到這個法鼓

71
00:06:35,000 --> 00:06:40,000
法鼓文理學院報到人數是最少的 接下來是這台灣戲曲學院

72
00:06:41,000 --> 00:06:43,000
那從這個當然 我們可以看得很清楚啦

73
00:06:43,000 --> 00:06:49,000
如果說我們想要在我的這個面板上面直接呈現的話

74
00:06:49,300 --> 00:06:54,000
可以直接透過 describe 來看一下他的一些相關統計的數據

75
00:06:54,000 --> 00:07:02,000
所以各位看到最多最多人數的這個學校 只有三萬多 三萬多

76
00:07:02,000 --> 00:07:06,000
最小的也有到兩百八十 就是法鼓這個學校

77
00:07:06,000 --> 00:07:12,000
中位數的話是落在六千多 那我也可以直接透過 head 跟 tail

78
00:07:13,000 --> 00:07:19,000
把這個學校把他列出來 這是前面幾所人數比較少的

79
00:07:19,500 --> 00:07:26,000
那人數比較多的呢 我們也可以看一下 果然是這個台大人數是最多的

80
00:07:29,000 --> 00:07:34,000
接下來我們來算一下國立大學跟私立大學的這個數量

81
00:07:34,500 --> 00:07:39,000
那怎麼算呢 因為在我們這個資料表裡面我們先把他打開

82
00:07:39,300 --> 00:07:45,000
其實他並沒有一個特別的欄位去表明說他是國立大學和私立大學

83
00:07:46,000 --> 00:07:50,500
但是呢我們其實知道只要名稱裡有包含國立那就是國立

84
00:07:50,800 --> 00:07:53,000
名稱沒有的話他就是一個私立

85
00:07:53,500 --> 00:07:56,000
那透過這樣的一個規則 我們就可以來查詢

86
00:07:56,500 --> 00:08:00,000
查詢這裡面 這個字串裡面有沒有包含國立

87
00:08:01,000 --> 00:08:04,000
但是我們遇到一個問題 就是說這個地方他是一個 index

88
00:08:04,500 --> 00:08:11,500
剛剛在做 groupby 的時候 我們這個 by 的欄位是學校名稱嘛

89
00:08:11,700 --> 00:08:16,500
所以他預設就變成這筆新的資料的 index

90
00:08:16,700 --> 00:08:21,300
那這樣子的話就不好搜尋 所以這個地方我們做一下變化

91
00:08:21,800 --> 00:08:25,000
在 groupby 的時候 as_index 把他設為 False

92
00:08:26,000 --> 00:08:28,500
那我們來再執行一遍看看

93
00:08:31,000 --> 00:08:35,000
跑出來一樣是把他設為 df 看一下 df 這時候的 index

94
00:08:35,000 --> 00:08:39,000
他會自己去排 從 0 一直到最後一筆

95
00:08:39,000 --> 00:08:45,000
那學校的名稱就會保持在這個地方 那這樣子就方便我們去做一些搜尋

96
00:08:45,800 --> 00:08:50,000
那我們先看一下這個第三行這個地方 我們怎麼做呢

97
00:08:50,000 --> 00:08:54,000
這個 df_n n 是代表 national 國立的意思

98
00:08:54,000 --> 00:08:57,000
df 後面這個地方事實上他是一個條件句

99
00:08:57,700 --> 00:09:04,000
就是學校的名稱我把他轉成字串了以後 他是否包含國立這個字

100
00:09:04,800 --> 00:09:11,800
所以這裡產生出來他會是一個 boolean 那我再把他丟到這一個 df 裡面

101
00:09:12,000 --> 00:09:16,500
他就會把這個國立大學的全部列出來 那我們來執行一遍看看

102
00:09:19,000 --> 00:09:23,000
各位可以看到全部都是裡面包含 df 的

103
00:09:23,000 --> 00:09:31,000
那同理的話呢 就是私立的話呢 我們只要在這個條件前面一個波浪

104
00:09:31,000 --> 00:09:38,000
波浪代表 not 的意思 這樣子出來的會是沒有包含國立的就是私立的學校

105
00:09:38,000 --> 00:09:44,000
那如果說 各位對這麼長的一個敘述覺得有點困惑的話

106
00:09:44,000 --> 00:09:49,000
我們可以先把這個條件好先複製到前面這個地方來 我們先執行一遍

107
00:09:49,000 --> 00:09:56,000
大家先看一下 執行出來以後 你可以看到他一樣是這樣一群的這個資料

108
00:09:56,000 --> 00:09:59,000
那只是說後面這個地方 緊接著就是一個條件句

109
00:10:00,000 --> 00:10:07,000
就是 True 跟 False 那再代到 df 裡面 他就會把相對應的這個資料把他印出來

110
00:10:08,000 --> 00:10:14,000
那這樣子的話 我們就已經知道國立大學跟私立大學的這兩個資料表

111
00:10:14,000 --> 00:10:17,000
那我們再去設定一下他的這個長度

112
00:10:17,000 --> 00:10:21,000
透過 len 就可以知道他的長度了 然後在把他印出來

113
00:10:22,000 --> 00:10:27,000
所以我們就可以知道說 國立大學的這個人數有四十七所

114
00:10:27,000 --> 00:10:32,000
私立的話有一百零六所 總共是一百五十三所

