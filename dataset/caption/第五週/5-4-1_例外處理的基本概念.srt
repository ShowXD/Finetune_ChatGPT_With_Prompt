1
00:00:14,043 --> 00:00:18,591
當我們在執行程式碼的時候呢 難免都會遇到一些例外

2
00:00:18,612 --> 00:00:23,090
例如我們希望使用者輸入一個 number

3
00:00:23,115 --> 00:00:25,564
但是他偏偏輸入一個字母

4
00:00:25,922 --> 00:00:31,814
造成我們在做字型的型態轉換的時候產生了一些例外

5
00:00:32,283 --> 00:00:38,163
或者我們期望使用者把這個 file 放在 data 這個目錄下

6
00:00:38,345 --> 00:00:41,416
但偏偏他是放在另一個目錄下

7
00:00:41,441 --> 00:00:45,798
造成我們在做開檔的時候沒辦法順利地開檔

8
00:00:46,275 --> 00:00:48,552
因而就產生了這些例外

9
00:00:49,283 --> 00:00:51,799
所以我們對於這些例外來做處理

10
00:00:51,824 --> 00:00:54,029
就是所謂的例外處理

11
00:00:54,354 --> 00:00:55,893
那他語法是這樣子

12
00:00:55,918 --> 00:00:58,679
就是說 前面有一個 try

13
00:00:58,969 --> 00:01:03,783
那 try 內的這個 block 就是我們要執行的動作

14
00:01:03,808 --> 00:01:07,855
那這個動作不順利呢就會拋出一個例外

15
00:01:08,138 --> 00:01:11,220
那在 Except 這個地方呢就會去

16
00:01:11,427 --> 00:01:13,952
抓取到這個例外

17
00:01:14,031 --> 00:01:15,777
在這個 block 裡面

18
00:01:15,791 --> 00:01:18,452
在這個區塊裡面 我們就去描述

19
00:01:18,540 --> 00:01:22,518
發生了這個例外以後我們要處理的動作為何

20
00:01:23,169 --> 00:01:25,222
如果沒有發生例外的話

21
00:01:25,247 --> 00:01:27,524
使用者的輸入阿

22
00:01:27,549 --> 00:01:28,987
跟這個檔案阿

23
00:01:29,017 --> 00:01:32,765
都是依照我們的想像得把它放得很好

24
00:01:32,768 --> 00:01:36,743
這時候沒有例外他就跑到else 這個子句

25
00:01:37,022 --> 00:01:39,228
finally 就是在表

26
00:01:39,253 --> 00:01:41,474
不管你有沒有發生例外

27
00:01:41,493 --> 00:01:46,011
最後都會執行的動作把它寫在 finally 裡面

28
00:01:47,014 --> 00:01:49,683
好我們實際的來看一個例子

29
00:01:49,750 --> 00:01:53,448
這個例子是輸入一個出生年

30
00:01:53,473 --> 00:01:56,783
那我去計算他的年齡的一個小程式

31
00:01:56,808 --> 00:01:59,853
那我們這裡寫一個 function getAge()

32
00:02:00,108 --> 00:02:05,781
就等於把 2018 扣掉你的出生年就得到你的年齡

33
00:02:05,806 --> 00:02:07,171
那我們這個地方呢

34
00:02:07,196 --> 00:02:10,783
會要求輸入你的出生年

35
00:02:10,808 --> 00:02:13,696
然後去呼叫這個 function 最後把它印出來

36
00:02:14,216 --> 00:02:17,438
那實際來執行這隻程式

37
00:02:17,463 --> 00:02:19,414
那我打入一個 abc

38
00:02:19,454 --> 00:02:20,454
這時候呢

39
00:02:20,526 --> 00:02:23,417
你會發現它就產生一個例外

40
00:02:23,442 --> 00:02:27,416
這裡紅色的地方就寫一個 valueError

41
00:02:27,441 --> 00:02:30,473
描述這個地方產生了一個例外

42
00:02:30,498 --> 00:02:31,378
就是因為

43
00:02:31,410 --> 00:02:35,733
我們輸入的 abc 要把它轉成 int 的時候

44
00:02:35,767 --> 00:02:36,702
沒有辦法轉

45
00:02:36,752 --> 00:02:39,100
所以它就拋出一個例外

46
00:02:39,339 --> 00:02:41,493
中斷我們程式的執行

47
00:02:41,518 --> 00:02:44,371
所以這個 print 它就不會被

48
00:02:44,396 --> 00:02:49,475
這一個方法跟這一個 print 他都不會被執行到

49
00:02:49,656 --> 00:02:51,118
那第二個

50
00:02:51,143 --> 00:02:54,881
在第二版的這個程式我們做了一下改良

51
00:02:54,906 --> 00:02:56,849
第一個我們會去判斷說

52
00:02:56,905 --> 00:02:59,579
你的輸入它是不是一個數值

53
00:02:59,661 --> 00:03:01,387
如果是數值的話呢

54
00:03:01,793 --> 00:03:04,311
我們才會進行下一步的動作

55
00:03:04,336 --> 00:03:05,589
如果不是的話

56
00:03:05,614 --> 00:03:09,589
我會跑一個迴圈 一直叫你去做一個輸入

57
00:03:09,997 --> 00:03:12,534
那我們實際來執行一下

58
00:03:12,559 --> 00:03:13,559
如果這時候呢

59
00:03:13,893 --> 00:03:16,870
我們輸入 abc 這時候迴圈

60
00:03:16,926 --> 00:03:19,543
它會再回來再要求你輸入一次

61
00:03:19,568 --> 00:03:21,377
那我輸入 1990

62
00:03:21,397 --> 00:03:22,397
這時候對了 它就會印出 28

63
00:03:25,158 --> 00:03:28,537
那在第三版我們嘗試用

64
00:03:28,562 --> 00:03:31,887
try exception 的方式來解決這個問題

65
00:03:31,912 --> 00:03:34,610
讓我們的程式變得更簡潔

66
00:03:34,754 --> 00:03:35,754
更通用

67
00:03:36,380 --> 00:03:39,817
因為我們今天在執行這個指令

68
00:03:39,842 --> 00:03:42,150
要求轉換使用者的輸入

69
00:03:42,175 --> 00:03:43,761
變成是 int 的時候

70
00:03:43,786 --> 00:03:45,124
其實這件事情

71
00:03:45,149 --> 00:03:47,582
他很有可能會發生例外

72
00:03:47,607 --> 00:03:50,082
所以我們就用 try 把它包起來

73
00:03:50,106 --> 00:03:52,948
然後他會進到這個 exception

74
00:03:52,995 --> 00:03:55,340
如果這個轉換有問題的話

75
00:03:55,365 --> 00:03:57,016
它就會進到這一個地方

76
00:03:57,041 --> 00:04:00,060
我們會把這一個例外印出來

77
00:04:00,100 --> 00:04:02,063
然後給你一個提示

78
00:04:02,088 --> 00:04:06,331
說輸入錯誤 請你重新輸入

79
00:04:06,530 --> 00:04:09,736
否則的話代表一切順利

80
00:04:09,761 --> 00:04:14,839
直接把它轉成 int 然後去呼叫 getAge()

81
00:04:15,037 --> 00:04:16,228
把它印出來

82
00:04:16,822 --> 00:04:19,438
那我們實際來執行一遍

83
00:04:21,080 --> 00:04:23,595
那一樣我們故意輸入一個 abc

84
00:04:23,620 --> 00:04:25,619
讓他拋出一個例外

85
00:04:25,681 --> 00:04:27,484
這時候我們會發現呢

86
00:04:27,581 --> 00:04:29,309
前面這裡會寫一個

87
00:04:29,334 --> 00:04:33,548
invalid literal for int() ...

88
00:04:33,573 --> 00:04:36,055
這一個就是這個 exception

89
00:04:36,080 --> 00:04:38,962
拋出的這個例外已經被我們抓到了

90
00:04:38,987 --> 00:04:43,294
把這個例外印出來然後後面

91
00:04:43,310 --> 00:04:46,535
印出我們特別寫的這個提示

92
00:04:46,560 --> 00:04:49,944
那重新輸入 我們這時候輸入一個 1990

93
00:04:50,096 --> 00:04:51,222
這樣就 ok 了

94
00:04:51,713 --> 00:04:55,418
但是這個程式它有一個缺點

95
00:04:55,452 --> 00:04:57,738
假設我們今天輸入的是

96
00:04:58,016 --> 00:04:59,348
不是 19..

97
00:04:59,512 --> 00:05:02,339
1990 而是輸入一個 1880

98
00:05:02,371 --> 00:05:04,752
但是在目前的戶政系統上

99
00:05:04,769 --> 00:05:07,245
1880 就不可能有人

100
00:05:07,270 --> 00:05:10,992
是這個年份出生的 所以呢

101
00:05:11,022 --> 00:05:15,999
我們在第四個版本加強這方面的檢查

102
00:05:16,324 --> 00:05:18,679
我們在 getAge() 這個地方呢

103
00:05:18,704 --> 00:05:19,761
會去檢查

104
00:05:19,786 --> 00:05:23,061
我的 year 大於 2019

105
00:05:23,133 --> 00:05:25,719
或者是 year 小於 1990

106
00:05:25,744 --> 00:05:28,730
對我們來講這都是一種例外

107
00:05:28,755 --> 00:05:31,748
都是輸入方面的例外 因為不可能是

108
00:05:31,773 --> 00:05:32,862
這個年分

109
00:05:32,887 --> 00:05:34,891
所以我們就 raise

110
00:05:34,916 --> 00:05:36,530
raise 的話就是

111
00:05:36,555 --> 00:05:38,466
我就會拋出一個例外

112
00:05:38,934 --> 00:05:41,188
我們這個例外裡面描述就是

113
00:05:41,213 --> 00:05:43,710
Impossible year 不可能有這一年

114
00:05:43,735 --> 00:05:44,511
OK

115
00:05:44,853 --> 00:05:45,853
那在

116
00:05:46,289 --> 00:05:49,689
while 這一個迴圈我們也做了一些處理

117
00:05:49,714 --> 00:05:52,972
因為現在我們這個 int 的轉換

118
00:05:53,012 --> 00:05:55,440
跟呼叫這個 getAge()

119
00:05:55,719 --> 00:05:58,733
這兩件事情都可能產生例外

120
00:05:58,758 --> 00:06:02,051
所以我們都用 try 把它包起來

121
00:06:02,220 --> 00:06:06,544
當它發生例外它就會進到這個區域

122
00:06:06,569 --> 00:06:07,886
把他這個

123
00:06:09,244 --> 00:06:10,815
印出這個例外

124
00:06:10,840 --> 00:06:13,624
那我們來實際執行一下

125
00:06:13,672 --> 00:06:17,391
出生這個年我們一樣寫 abc

126
00:06:17,424 --> 00:06:18,275
這時候呢

127
00:06:18,300 --> 00:06:23,657
它會跟剛剛一樣就會印出例外出來

128
00:06:23,682 --> 00:06:25,252
印出這個例外出來

129
00:06:25,277 --> 00:06:27,458
這時候我寫了這個年份

130
00:06:27,483 --> 00:06:29,164
比方說我寫

131
00:06:29,522 --> 00:06:32,665
西元 1000 年 按一下 Enter

132
00:06:32,690 --> 00:06:33,642
這時候呢

133
00:06:33,666 --> 00:06:36,135
他去呼叫 getAge() 的時候

134
00:06:36,723 --> 00:06:40,062
它會去 raise 一個 exception 是 Impossible

135
00:06:40,087 --> 00:06:41,888
所以這時候它也是

136
00:06:41,913 --> 00:06:44,386
印出一個 Impossible 以後呢

137
00:06:44,411 --> 00:06:47,682
要求你再重新做輸入 這時候我們印出

138
00:06:47,887 --> 00:06:50,619
我們寫上 1990 按一下 Enter

139
00:06:50,644 --> 00:06:53,295
這時候這年分就對了

140
00:06:53,422 --> 00:06:54,874
這年分就對了

141
00:06:54,986 --> 00:07:00,073
這個就是一種例外處理的方法跟機制

